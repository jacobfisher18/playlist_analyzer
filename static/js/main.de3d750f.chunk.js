(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/spinner.8b9a5cd1.gif"},20:function(e,t,a){e.exports=a(58)},26:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(15),c=a.n(s),i=(a(26),a(5)),o=a(6),l=a(8),u=a(7),p=a(9),m=a(61),h=a(62),f=a(10),d=a(2),k=a.n(d),b=a(3),y=a(19),v=a(16),g=a.n(v),E=(a(33),a(14)),_="https://api.spotify.com/v1/me/playlists?&limit=".concat(50),T=function(e){return"https://api.spotify.com/v1/playlists/".concat(e,"/tracks")},x=function(){var e=Object(b.a)(k.a.mark(function e(t,a){var r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.json());case 7:throw new Error("Recieved ".concat(r.status," when fetching"));case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(k.a.mark(function e(t){var a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("https://api.spotify.com/v1/me",t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error getting the current user profile",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(k.a.mark(function e(t){var a,r,n,s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=[],r=!0,n=_;case 4:if(!r){e.next=12;break}return e.next=7,x(n,t);case 7:s=e.sent,a.push.apply(a,Object(E.a)(s.items)),s.next?n=s.next:r=!1,e.next=4;break;case 12:return e.abrupt("return",a);case 15:return e.prev=15,e.t0=e.catch(0),console.error("Error getting all user playlists",e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(k.a.mark(function e(t,a){var r,n,s,c,i,o,l,u,p,m,h,f;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],n=[],s=!0,c=!1,i=void 0,e.prev=5,o=a[Symbol.iterator]();!(s=(l=o.next()).done);s=!0)u=l.value,r.push(O(t,u.id)),n.push(u.name);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),c=!0,i=e.t0;case 13:e.prev=13,e.prev=14,s||null==o.return||o.return();case 16:if(e.prev=16,!c){e.next=19;break}throw i;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return e.next=23,Promise.all(r);case 23:if(p=e.sent,m=p.every(function(e){return null!==e}),p.length===n.length&&m){e.next=28;break}return console.error("Error fetching all tracks in all playlists; further investigation needed"),e.abrupt("return",null);case 28:for(h={},f=0;f<p.length;f++)h[n[f]]=p[f];return e.abrupt("return",h);case 31:case"end":return e.stop()}},e,null,[[5,9,13,21],[14,,16,20]])}));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(k.a.mark(function e(t,a){var r,n,s,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=[],n=!0,s=T(a);case 4:if(!n){e.next=12;break}return e.next=7,x(s,t);case 7:c=e.sent,r.push.apply(r,Object(E.a)(c.items)),c.next?s=c.next:n=!1,e.next=4;break;case 12:return e.abrupt("return",r);case 15:return e.prev=15,e.t0=e.catch(0),console.error("Error getting tracks for playlist ".concat(a),e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t,a){return e.apply(this,arguments)}}(),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={playlists:[],playlistNameToTracksMap:{},filteredTracks:[],searchText:"",loading:!1,error:!1},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(k.a.mark(function e(){var t,a,r=this;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,j(this.props.access_token);case 3:if(null!==(t=e.sent)){e.next=9;break}return this.setState({loading:!1,error:!0}),e.abrupt("return");case 9:if(0!==t.length){e.next=13;break}return console.error("Did not find any playlists."),this.setState({loading:!1,error:!0}),e.abrupt("return");case 13:return e.next=15,w(this.props.access_token,t);case 15:if(null!==(a=e.sent)){e.next=21;break}return this.setState({loading:!1,error:!0}),e.abrupt("return");case 21:Object.values(a).every(function(e){return 0===e.length})&&(console.error("Did not find any tracks in any playlists."),this.setState({loading:!1,error:!0}));case 22:this.setState({playlistNameToTracksMap:a},function(){r.applyFilter(function(){return r.setState({loading:!1})})});case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"applyFilter",value:function(e){for(var t=this.state,a=t.playlistNameToTracksMap,r=t.searchText,n=[],s=0,c=Object.entries(a);s<c.length;s++){var i=c[s],o=Object(y.a)(i,2),l=o[0],u=o[1],p=!0,m=!1,h=void 0;try{for(var f,d=u[Symbol.iterator]();!(p=(f=d.next()).done);p=!0){var k=f.value.track;if(k)if(k.name&&k.artists&&k.album&&k.id){var b=k.name.toLowerCase().includes(r.toLowerCase()),v=k.artists.map(function(e){return e.name}).join(", "),g=v.toLowerCase().includes(r.toLowerCase()),E=k.album.name.toLowerCase().includes(r.toLowerCase());(b||g||E)&&n.push({key:"".concat(l,"-").concat(k.id),playlistName:l,trackName:k.name,artist:v,album:k.album.name})}else console.error("Track does not have expected data");else console.error("Track does not have expected data")}}catch(_){m=!0,h=_}finally{try{p||null==d.return||d.return()}finally{if(m)throw h}}}this.setState({filteredTracks:n},e)}},{key:"renderFilteredTracks",value:function(){var e=this.state.filteredTracks;return e?e.slice(0,500).map(function(e){return n.a.createElement("tr",{key:e.key,className:"TrackList_Row"},n.a.createElement("td",{className:"Tracklist_Playlist"},e.playlistName),n.a.createElement("td",{className:"Tracklist_Title"},e.trackName),n.a.createElement("td",{className:"Tracklist_Artist_Album"},e.artist),n.a.createElement("td",{className:"Tracklist_Artist_Album"},e.album))}):null}},{key:"numTracks",value:function(){var e=this.state.playlistNameToTracksMap;return e?Object.values(e).map(function(e){return e.length}).reduce(function(e,t){return e+t},0):0}},{key:"filterByKey",value:function(e){this.setState(function(t){return{filteredTracks:t.filteredTracks.sort(function(t,a){return t[e].toLowerCase().localeCompare(a[e].toLowerCase())})}})}},{key:"render",value:function(){var e=this;return this.state.error?n.a.createElement("p",null,"ERROR"):this.state.loading?n.a.createElement("div",{className:"centered"},n.a.createElement("img",{src:g.a,className:"Spinner",alt:"loading..."})):n.a.createElement("div",{className:"AllTracks"},n.a.createElement("p",{className:"PlaylistHeader_Name"},"All Tracks"),n.a.createElement("p",{className:"PlaylistHeader_Subtitle"},n.a.createElement("span",{className:"Bold"},this.numTracks())," total tracks \u2022 ",n.a.createElement("span",{className:"Bold"},this.state.filteredTracks.length)," filtered tracks"),n.a.createElement("p",{className:"PlaylistHeader_Subtitle"}),n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.applyFilter()}},n.a.createElement("input",{className:"SearchBar",placeholder:"Search a track name, artist, or album...",type:"text",onChange:function(t){return e.setState({searchText:t.target.value})},value:this.state.searchText})),n.a.createElement("div",null,n.a.createElement("table",{className:"AllTracks_TrackList"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("playlistName")}},"PLAYLIST"),n.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("trackName")}},"TITLE"),n.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("artist")}},"ARTIST"),n.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("album")}},"ALBUM")),this.renderFilteredTracks()))))}}]),t}(r.Component);a(35);var C=function(e){var t=e.user;return n.a.createElement("div",{className:"Header"},t&&t.images?n.a.createElement("img",{className:"Header_Img",src:t.images[0].url||"",alt:"user img"}):n.a.createElement("span",null),n.a.createElement("p",{className:"Header_Name"},t.display_name),n.a.createElement("button",{type:"button",className:"Header_Logout",onClick:function(){return e.logout()}},"Log Out"))},S=(a(37),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={access_token:a.props.cookies.get("access_token")||"",user:{display_name:"",images:[{url:""}]}},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.access_token){e.next=4;break}this.props.history.push("/"),e.next=13;break;case 4:return e.next=6,N(this.state.access_token);case 6:if(!(t=e.sent)){e.next=11;break}this.setState({user:t}),e.next=13;break;case 11:return e.next=13,this.logout();case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(b.a)(k.a.mark(function e(){var t=this;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.cookies.remove("access_token");case 2:this.setState({access_token:""},function(){t.props.history.push("/")});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"Home"},n.a.createElement(C,{user:this.state.user,logout:this.logout.bind(this)}),n.a.createElement(L,{access_token:this.state.access_token}))}}]),t}(r.Component)),A=Object(f.b)(S),B=a(17),H=a.n(B),I="user-read-private user-read-email playlist-read-private",R=(a(50),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location,t=H.a.parse(e.hash).access_token||"";t?(this.props.cookies.set("access_token",t),this.props.history.push("/home")):this.props.cookies.get("access_token")&&this.props.history.push("/home")}},{key:"render",value:function(){return n.a.createElement("div",{className:"Landing"},n.a.createElement("h3",{className:"Landing_Title_Spotify"},"Spotify"),n.a.createElement("h1",{className:"Landing_Title_Playlist_Analyzer"},"PLAYLIST ANALYZER"),n.a.createElement("h5",{className:"Landing_Title_Web_App"},"A web app by"," ",n.a.createElement("span",{className:"Landing_Title_Name"},"Jacob Fisher")),n.a.createElement("button",{className:"Landing_Button_Login",onClick:function(){window.location="https://accounts.spotify.com/authorize?response_type=token&client_id=bc800faa1cb3438da94f230ba04a1e1b&scope="+encodeURIComponent(I)+"&redirect_uri="+encodeURIComponent("https://jacobfisher18.github.io/playlist_analyzer/")+"&show_dialog=true"}},"LOGIN"))}}]),t}(r.Component)),M=Object(f.b)(R),P=(a(52),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement(m.a,{basename:"/playlist_analyzer"},n.a.createElement("div",null,n.a.createElement(h.a,{path:"/",exact:!0,component:M}),n.a.createElement(h.a,{path:"/home",component:A}))))}}]),t}(r.Component));c.a.render(n.a.createElement(P,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.de3d750f.chunk.js.map