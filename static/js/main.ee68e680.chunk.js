(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/spinner.8b9a5cd1.gif"},16:function(e,t,a){e.exports=a(52)},22:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),c=a.n(r),i=(a(22),a(3)),l=a(4),o=a(6),u=a(5),m=a(7),p=a(55),h=a(56),f=a(8),y=function(e,t,a){fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(e){a(e)})},k=a(13),d=a.n(k),v=(a(27),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={playlists:[],tracks:[],filteredTracks:[],searchText:"",loading:!1,error:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.getPlaylists().then(function(){e.getAllTracks().then(function(){e.applyFilter(function(){return e.setState({loading:!1})})},function(){e.setState({error:!0})})},function(){e.setState({error:!0})})}},{key:"getAllTracks",value:function(){for(var e=[],t=0;t<this.state.playlists.length;t++)e.push(this.getTracks(this.state.playlists[t].id,this.state.playlists[t].name));return Promise.all(e)}},{key:"getPlaylists",value:function(){var e=this;this.setState({playlists:[]});var t="https://api.spotify.com/v1/me/playlists?&limit=".concat(50);return new Promise(function(a,n){e.recursivelyGetPlaylists(t).then(function(){a()},function(){n()})})}},{key:"recursivelyGetPlaylists",value:function(e){var t=this;return new Promise(function(a,n){y(e,t.props.access_token,function(e){t.setState({playlists:t.state.playlists.concat(e.items)}),e.next?t.recursivelyGetPlaylists(e.next).then(function(){a()},function(){n()}):0===t.state.playlists.length?n():a()})})}},{key:"getTracks",value:function(e,t){var a="https://api.spotify.com/v1/playlists/".concat(e,"/tracks");return this.recursivelyGetTracks([],a,e,t)}},{key:"recursivelyGetTracks",value:function(e,t,a,n){var s=this;return new Promise(function(r,c){y(t,s.props.access_token,function(t){e=e.concat(t.items),t.next?s.recursivelyGetTracks(e,t.next,a,n).then(function(){r()},function(){c()}):0===e.length&&0!==t.items.length?c():s.setState(function(t){return{tracks:t.tracks.concat([{playlist_name:n,playlist_id:a,items:e}])}},function(){return r()})})})}},{key:"applyFilter",value:function(e){for(var t=this.state,a=t.tracks,n=t.searchText,s=[],r=0;r<a.length;r++)for(var c=0;c<a[r].items.length;c++)if(a[r].items[c]&&a[r].items[c].track){var i=a[r].items[c].track,l=i.name.toLowerCase().includes(n.toLowerCase()),o=i.artists.map(function(e){return e.name}).join(" ").toLowerCase().includes(n.toLowerCase()),u=i.album.name.toLowerCase().includes(n.toLowerCase());(l||o||u)&&s.push({key:"".concat(a[r].playlist_name,"-").concat(i.id),playlist_name:a[r].playlist_name,trackName:i.name,artist:i.artists.map(function(e){return e.name}).join(", "),album:i.album.name})}this.setState({filteredTracks:s},e)}},{key:"renderFilteredTracks",value:function(){var e=this.state.filteredTracks;return e?e.slice(0,500).map(function(e){return s.a.createElement("tr",{key:e.key,className:"TrackList_Row"},s.a.createElement("td",{className:"Tracklist_Playlist"},e.playlist_name),s.a.createElement("td",{className:"Tracklist_Title"},e.trackName),s.a.createElement("td",{className:"Tracklist_Artist_Album"},e.artist),s.a.createElement("td",{className:"Tracklist_Artist_Album"},e.album))}):null}},{key:"numTracks",value:function(){return this.state.tracks&&0!==this.state.tracks.length?this.state.tracks.reduce(function(e,t){return e+t.items.length},0):0}},{key:"filterByKey",value:function(e){this.setState(function(t){return{filteredTracks:t.filteredTracks.sort(function(t,a){return t[e].toLowerCase().localeCompare(a[e].toLowerCase())})}})}},{key:"render",value:function(){var e=this;return this.state.error?s.a.createElement("p",null,"ERROR"):this.state.loading?s.a.createElement("div",{className:"centered"},s.a.createElement("img",{src:d.a,className:"Spinner",alt:"loading..."})):s.a.createElement("div",{className:"AllTracks"},s.a.createElement("p",{className:"PlaylistHeader_Name"},"All Tracks"),s.a.createElement("p",{className:"PlaylistHeader_Subtitle"},s.a.createElement("span",{className:"Bold"},this.numTracks())," total tracks \u2022 ",s.a.createElement("span",{className:"Bold"},this.state.filteredTracks.length)," filtered tracks"),s.a.createElement("p",{className:"PlaylistHeader_Subtitle"}),s.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.applyFilter()}},s.a.createElement("input",{className:"SearchBar",placeholder:"Search a track name, artist, or album...",type:"text",onChange:function(t){return e.setState({searchText:t.target.value})},value:this.state.searchText})),s.a.createElement("div",null,s.a.createElement("table",{className:"AllTracks_TrackList"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("playlist_name")}},"PLAYLIST"),s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("trackName")}},"TITLE"),s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("artist")}},"ARTIST"),s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("album")}},"ALBUM")),this.renderFilteredTracks()))))}}]),t}(n.Component));a(29);var _=function(e){var t=e.user;return s.a.createElement("div",{className:"Header"},s.a.createElement("button",{type:"button",className:"Header_Logout",onClick:function(){return e.logout()}},"logout"),s.a.createElement("p",{className:"Header_Name"},t.display_name),t&&t.images?s.a.createElement("img",{className:"Header_Img",src:t.images[0].url||"",alt:"user img"}):s.a.createElement("span",null),s.a.createElement("div",{style:{clear:"both"}}))},b=(a(31),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={access_token:a.props.cookies.get("access_token")||"",user:{display_name:"",images:[{url:""}]}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.access_token?this.getUserProfile():this.props.history.push("/")}},{key:"componentDidUpdate",value:function(){this.state.access_token||this.props.history.push("/")}},{key:"logout",value:function(){this.props.cookies.remove("access_token"),this.setState({access_token:""})}},{key:"getUserProfile",value:function(){var e=this;y("https://api.spotify.com/v1/me",this.state.access_token,function(t){e.setState({user:t})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Home"},s.a.createElement(_,{user:this.state.user,logout:this.logout.bind(this)}),s.a.createElement(v,{access_token:this.state.access_token}))}}]),t}(n.Component)),g=Object(f.b)(b),E=a(14),T=a.n(E),N="user-read-private user-read-email playlist-read-private",L=(a(44),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location,t=T.a.parse(e.hash).access_token||"";t?(this.props.cookies.set("access_token",t),this.props.history.push("/home")):this.props.cookies.get("access_token")&&this.props.history.push("/home")}},{key:"render",value:function(){return s.a.createElement("div",{className:"Landing"},s.a.createElement("h3",{className:"Landing_Title_Spotify"},"Spotify"),s.a.createElement("h1",{className:"Landing_Title_Playlist_Analyzer"},"PLAYLIST ANALYZER"),s.a.createElement("h5",{className:"Landing_Title_Web_App"},"A web app by"," ",s.a.createElement("span",{className:"Landing_Title_Name"},"Jacob Fisher")),s.a.createElement("button",{className:"Landing_Button_Login",onClick:function(){window.location="https://accounts.spotify.com/authorize?response_type=token&client_id=bc800faa1cb3438da94f230ba04a1e1b&scope="+encodeURIComponent(N)+"&redirect_uri="+encodeURIComponent("https://jacobfisher18.github.io/playlist_analyzer/")+"&show_dialog=true"}},"LOGIN"))}}]),t}(n.Component)),j=Object(f.b)(L),C=(a(46),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(f.a,null,s.a.createElement(p.a,{basename:"/playlist_analyzer"},s.a.createElement("div",null,s.a.createElement(h.a,{path:"/",exact:!0,component:j}),s.a.createElement(h.a,{path:"/home",component:g}))))}}]),t}(n.Component));c.a.render(s.a.createElement(C,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.ee68e680.chunk.js.map