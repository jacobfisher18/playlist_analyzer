(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n(68)},41:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(32),o=n.n(c),u=(n(41),n(15)),i=n(16),s=n(20),l=n(19),f=n(11),p=n(79),m=n(82),h=n(18),b=n(6),y=n.n(b),v=n(9),d=n(5),g=n(33),k=n(8),E=function(e){return new Promise(function(t){return setTimeout(t,e)})};function j(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw c}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x="https://api.spotify.com/v1/me/playlists?&limit=".concat(50),O=function(e){return"https://api.spotify.com/v1/playlists/".concat(e,"/tracks")},S=function(){var e=Object(v.a)(y.a.mark(function e(t,n){var r,a,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.json());case 7:if(429!==r.status){e.next=22;break}if(a=r.headers.get("retry-after")){e.next=11;break}throw new Error("Rate limited but could not get retry-after value");case 11:if(!((c=parseInt(a))>10)){e.next=14;break}throw new Error("Rate limited with a long retry-after of ".concat(c," seconds, not retrying"));case 14:return console.log("Rate limited, retrying in ".concat(c," seconds")),e.next=17,E(1e3*c);case 17:return e.next=19,S(t,n);case 19:return e.abrupt("return",e.sent);case 22:throw new Error("Recieved ".concat(r.status," when fetching"));case 23:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(v.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S("https://api.spotify.com/v1/me",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error getting the current user profile",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(v.a)(y.a.mark(function e(t){var n,r,a,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[],r=!0,a=x;case 4:if(!r){e.next=14;break}return e.next=7,S(a,t);case 7:return c=e.sent,n.push.apply(n,Object(k.a)(c.items)),c.next?a=c.next:r=!1,e.next=12,E(250);case 12:e.next=4;break;case 14:return e.abrupt("return",n);case 17:return e.prev=17,e.t0=e.catch(0),console.error("Error getting all user playlists",e.t0),e.abrupt("return",null);case 21:case"end":return e.stop()}},e,null,[[0,17]])}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(y.a.mark(function e(t,n){var r,a,c,o,u,i,s,l,f;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],c=j(n);try{for(c.s();!(o=c.n()).done;)u=o.value,r.push(L(t,u.id)),a.push(u.name)}catch(p){c.e(p)}finally{c.f()}return e.next=6,Promise.all(r);case 6:if(i=e.sent,s=i.every(function(e){return null!==e}),i.length===a.length&&s){e.next=11;break}return console.error("Error fetching all tracks in all playlists"),e.abrupt("return",null);case 11:for(l={},f=0;f<i.length;f++)l[a[f]]=i[f];return e.abrupt("return",l);case 14:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(y.a.mark(function e(t,n){var r,a,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=[],a=!0,c=O(n);case 4:if(!a){e.next=12;break}return e.next=7,S(c,t);case 7:o=e.sent,r.push.apply(r,Object(k.a)(o.items)),o.next?c=o.next:a=!1,e.next=4;break;case 12:return e.abrupt("return",r);case 15:return e.prev=15,e.t0=e.catch(0),console.error("Error getting tracks for playlist ".concat(n),e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t,n){return e.apply(this,arguments)}}();function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw c}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=n(74),N=n(70),B=n(83),P=n(84),z=n(77),D=n(78),M=n(85);function U(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw c}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],o=n[1],u=Object(r.useState)(""),i=Object(d.a)(u,2),s=i[0],l=i[1],f=function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),u=Object(d.a)(o,2),i=u[0],s=u[1],l=Object(r.useState)(!1),f=Object(d.a)(l,2),p=f[0],m=f[1];return Object(r.useEffect)(function(){!function(){var t=Object(v.a)(y.a.mark(function t(){var n,r,a,o,u,i,l,f,p,h,b,v,k;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,A(e);case 3:if(null!==(n=t.sent)){t.next=8;break}return s(!1),m(!0),t.abrupt("return");case 8:if(n.length){t.next=13;break}return console.error("Did not find any playlists."),s(!1),m(!0),t.abrupt("return");case 13:return t.next=15,R(e,n);case 15:if(null!==(r=t.sent)){t.next=20;break}return s(!1),m(!0),t.abrupt("return");case 20:if(!Object.values(r).every(function(e){return 0===e.length})){t.next=25;break}return console.error("Did not find any tracks in any playlists."),s(!1),m(!0),t.abrupt("return");case 25:a=[],o=0,u=Object.entries(r);case 27:if(!(o<u.length)){t.next=55;break}i=u[o],l=Object(d.a)(i,2),f=l[0],p=l[1],h=C(p),t.prev=33,h.s();case 35:if((b=h.n()).done){t.next=44;break}if(v=b.value,(k=v.track).name&&k.artists&&k.album&&k.id){t.next=41;break}return console.error("Track does not have expected data"),t.abrupt("continue",42);case 41:a.push(Object(g.a)({},k,{playlistName:f}));case 42:t.next=35;break;case 44:t.next=49;break;case 46:t.prev=46,t.t0=t.catch(33),h.e(t.t0);case 49:return t.prev=49,h.f(),t.finish(49);case 52:o++,t.next=27;break;case 55:c(a),s(!1);case 57:case"end":return t.stop()}},t,null,[[33,46,49,52]])}));return function(){return t.apply(this,arguments)}}()()},[]),{allTracks:a,loading:i,error:p}}(e.access_token),p=f.allTracks,m=f.loading,h=f.error;return h?a.a.createElement("p",null,"ERROR"):m?a.a.createElement(I.a,null,a.a.createElement(N.a,{variant:"bars"})):a.a.createElement(B.a,{p:"sm"},a.a.createElement(P.a,{order:1},"Spotify Search"),a.a.createElement(z.a,{h:"sm"}),a.a.createElement(P.a,{order:5},p.length," total tracks \u2022 ",c.length," filtered tracks"),a.a.createElement(z.a,{h:"sm"}),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){var e,t=[],n=U(p);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.name.toLowerCase().includes(s.toLowerCase()),c=r.artists.map(function(e){return e.name}).join().toLowerCase().includes(s.toLowerCase()),u=r.album.name.toLowerCase().includes(s.toLowerCase());(a||c||u)&&t.push(r)}}catch(i){n.e(i)}finally{n.f()}o(t)}()}},a.a.createElement(D.a,{placeholder:"Search a track name, artist, or album...",value:s,onChange:function(e){return l(e.currentTarget.value)}})),a.a.createElement(z.a,{h:"sm"}),a.a.createElement("div",null,a.a.createElement(M.a,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"PLAYLIST"),a.a.createElement("th",null,"TITLE"),a.a.createElement("th",null,"ARTIST"),a.a.createElement("th",null,"ALBUM"))),a.a.createElement("tbody",null,c?c.slice(0,500).map(function(e){return a.a.createElement("tr",{key:"".concat(e.playlistName,"-").concat(e.id)},a.a.createElement("td",null,e.playlistName),a.a.createElement("td",null,e.name),a.a.createElement("td",null,e.artists.map(function(e){return e.name}).join(", ")),a.a.createElement("td",null,e.album.name))}):null))))},Y=n(80),$=n(25),F=n(81);var W=function(e){var t=e.user;return a.a.createElement(B.a,{p:"lg",style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"}},t&&t.images?a.a.createElement(Y.a,{src:t.images[0].url||"",radius:"xl"}):a.a.createElement("span",null),a.a.createElement(z.a,{w:"md"}),a.a.createElement($.a,null,t.display_name),a.a.createElement(z.a,{w:"md"}),a.a.createElement(F.a,{onClick:function(){return e.logout()}},"Log Out"))};function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var q=function(e){Object(s.a)(n,e);var t=Z(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={access_token:r.props.cookies.get("access_token")||"",user:{display_name:"",images:[{url:""}]}},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.access_token){e.next=4;break}this.props.history.push("/"),e.next=13;break;case 4:return e.next=6,_(this.state.access_token);case 6:if(!(t=e.sent)){e.next=11;break}this.setState({user:t}),e.next=13;break;case 11:return e.next=13,this.logout();case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(v.a)(y.a.mark(function e(){var t=this;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.cookies.remove("access_token");case 2:this.setState({access_token:""},function(){t.props.history.push("/")});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(W,{user:this.state.user,logout:this.logout.bind(this)}),a.a.createElement(J,{access_token:this.state.access_token}))}}]),n}(r.Component),H=Object(h.b)(q),K=n(34),Q=n.n(K),V="https://accounts.spotify.com/authorize?response_type=token"+"&client_id=".concat("bc800faa1cb3438da94f230ba04a1e1b")+"&scope=".concat(encodeURIComponent("user-read-private user-read-email playlist-read-private"))+"&redirect_uri=".concat(encodeURIComponent("https://jacobfisher18.github.io/playlist_analyzer/"))+"&show_dialog=true";n(60);function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ee=function(e){Object(s.a)(n,e);var t=X(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location,t=Q.a.parse(e.hash).access_token||"";t?(this.props.cookies.set("access_token",t),this.props.history.push("/home")):this.props.cookies.get("access_token")&&this.props.history.push("/home")}},{key:"render",value:function(){return a.a.createElement("div",{className:"Landing"},a.a.createElement("h3",{className:"Landing_Title_Spotify"},"Spotify"),a.a.createElement("h1",{className:"Landing_Title_Playlist_Analyzer"},"PLAYLIST ANALYZER"),a.a.createElement("h5",{className:"Landing_Title_Web_App"},"A web app by ",a.a.createElement("span",{className:"Landing_Title_Name"},"Jacob Fisher")),a.a.createElement("button",{className:"Landing_Button_Login",onClick:function(){window.location=V}},"LOGIN"))}}]),n}(r.Component),te=Object(h.b)(ee),ne=(n(62),n(29));function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ae=function(e){Object(s.a)(n,e);var t=re(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return a.a.createElement(h.a,null,a.a.createElement(ne.a,{theme:{colorScheme:"dark"},withGlobalStyles:!0,withNormalizeCSS:!0},a.a.createElement(p.a,{basename:"/playlist_analyzer"},a.a.createElement("div",null,a.a.createElement(m.a,{path:"/",exact:!0,component:te}),a.a.createElement(m.a,{path:"/home",component:H})))))}}]),n}(r.Component);o.a.render(a.a.createElement(ae,null),document.getElementById("root"))}},[[36,2,1]]]);
//# sourceMappingURL=main.c35d1cf2.chunk.js.map