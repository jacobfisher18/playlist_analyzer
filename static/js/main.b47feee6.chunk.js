(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/spinner.8b9a5cd1.gif"},20:function(e,t,a){e.exports=a(84)},26:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},57:function(e,t,a){},61:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(10),c=a.n(r),i=(a(26),a(2)),l=a(3),o=a(5),u=a(4),m=a(6),p=a(87),h=a(88),y=a(8),d=(a(31),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={activePlaylist:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderPlaylists",value:function(){var e=this;if(this.props.playlists)return this.props.playlists.map(function(t){return s.a.createElement("li",{className:e.props.currentPlaylist.name===t.name&&"PLAYLIST"===e.props.activePage?"Sidebar_Playlist_Selected":"Sidebar_Playlist_Unselected",key:t.name,onClick:function(){e.props.setActivePage("PLAYLIST"),e.props.setCurrentPlaylist(t)}},t.name)})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Sidebar"},s.a.createElement("h4",{className:"Sidebar_Title_Playlists"},"LIBRARY"),s.a.createElement("li",{className:"ALL_TRACKS"===this.props.activePage?"Sidebar_Playlist_Selected":"Sidebar_Playlist_Unselected",onClick:function(){e.props.setActivePage("ALL_TRACKS")}},"All Tracks"),s.a.createElement("h4",{className:"Sidebar_Title_Playlists"},"PLAYLISTS"),this.renderPlaylists())}}]),t}(n.Component)),k=function(e,t,a){fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(e){a(e)})},f=a(15),v=a.n(f),b=(a(33),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={playlists:[],tracks:[],filteredTracks:[],searchText:"",loading:!1,error:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.getPlaylists().then(function(){e.getAllTracks().then(function(){e.applyFilter(function(){return e.setState({loading:!1})})},function(){return e.setState({error:!0})})},function(){return e.setState({error:!0})})}},{key:"getAllTracks",value:function(){for(var e=[],t=0;t<this.state.playlists.length;t++)e.push(this.getTracks(this.state.playlists[t].id,this.state.playlists[t].name));return Promise.all(e)}},{key:"getPlaylists",value:function(){var e=this;this.setState({playlists:[]});var t="https://api.spotify.com/v1/me/playlists?&limit=".concat(50);return new Promise(function(a,n){e.recursivelyGetPlaylists(t).then(function(){a()},function(){n()})})}},{key:"recursivelyGetPlaylists",value:function(e){var t=this;return new Promise(function(a,n){k(e,t.props.access_token,function(e){t.setState({playlists:t.state.playlists.concat(e.items)}),e.next?t.recursivelyGetPlaylists(e.next).then(function(){a()},function(){n()}):0===t.state.playlists.length?n():a()})})}},{key:"getTracks",value:function(e,t){var a=this,n="https://api.spotify.com/v1/playlists/".concat(e,"/tracks");return new Promise(function(s,r){a.recursivelyGetTracks([],n,e,t).then(function(){s()},function(){r()})})}},{key:"recursivelyGetTracks",value:function(e,t,a,n){var s=this;return new Promise(function(r,c){k(t,s.props.access_token,function(t){e=e.concat(t.items),t.next?s.recursivelyGetTracks(e,t.next,a,n).then(function(){r()},function(){c()}):0===e.length?c():s.setState(function(t){return{tracks:t.tracks.concat([{playlist_name:n,playlist_id:a,items:e}])}},function(){return r()})})})}},{key:"applyFilter",value:function(e){for(var t=this.state,a=t.tracks,n=t.searchText,s=[],r=0;r<a.length;r++)for(var c=0;c<a[r].items.length;c++){var i=a[r].items[c].track.name.toLowerCase().includes(n.toLowerCase()),l=a[r].items[c].track.artists.map(function(e){return e.name}).join(" ").toLowerCase().includes(n.toLowerCase()),o=a[r].items[c].track.album.name.toLowerCase().includes(n.toLowerCase());(i||l||o)&&s.push({key:"".concat(a[r].playlist_name,"-").concat(a[r].items[c].track.id),playlist_name:a[r].playlist_name,trackName:a[r].items[c].track.name,artist:a[r].items[c].track.artists.map(function(e){return e.name}).join(", "),album:a[r].items[c].track.album.name})}this.setState({filteredTracks:s},e)}},{key:"renderFilteredTracks",value:function(){var e=this.state.filteredTracks;return e?e.slice(0,500).map(function(e){return s.a.createElement("tr",{key:e.key,className:"TrackList_Row"},s.a.createElement("td",{className:"Tracklist_Playlist"},e.playlist_name),s.a.createElement("td",{className:"Tracklist_Title"},e.trackName),s.a.createElement("td",{className:"Tracklist_Artist_Album"},e.artist),s.a.createElement("td",{className:"Tracklist_Artist_Album"},e.album))}):null}},{key:"numTracks",value:function(){return this.state.tracks&&0!==this.state.tracks.length?this.state.tracks.reduce(function(e,t){return e+t.items.length},0):0}},{key:"filterByKey",value:function(e){this.setState(function(t){return{filteredTracks:t.filteredTracks.sort(function(t,a){return t[e].toLowerCase().localeCompare(a[e].toLowerCase())})}})}},{key:"render",value:function(){var e=this;return this.state.error?s.a.createElement("p",null,"ERROR"):this.state.loading?s.a.createElement("div",{className:"centered"},s.a.createElement("img",{src:v.a,className:"Spinner",alt:"loading..."})):s.a.createElement("div",{className:"AllTracks"},s.a.createElement("p",{className:"PlaylistHeader_Name"},"All Tracks"),s.a.createElement("p",{className:"PlaylistHeader_Subtitle"},s.a.createElement("span",{className:"Bold"},this.numTracks())," total tracks \u2022 ",s.a.createElement("span",{className:"Bold"},this.state.filteredTracks.length)," filtered tracks"),s.a.createElement("p",{className:"PlaylistHeader_Subtitle"}),s.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.applyFilter()}},s.a.createElement("input",{className:"SearchBar",placeholder:"Search a track name, artist, or album...",type:"text",onChange:function(t){return e.setState({searchText:t.target.value})},value:this.state.searchText})),s.a.createElement("div",null,s.a.createElement("table",{className:"AllTracks_TrackList"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("playlist_name")}},"PLAYLIST"),s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("trackName")}},"TITLE"),s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("artist")}},"ARTIST"),s.a.createElement("th",{className:"TrackList_HeaderCell",onClick:function(){return e.filterByKey("album")}},"ALBUM")),this.renderFilteredTracks()))))}}]),t}(n.Component));a(35);var T=function(e){var t=e.user;return s.a.createElement("div",{className:"Header"},s.a.createElement("button",{type:"button",className:"Header_Logout",onClick:function(){return e.logout()}},"logout"),s.a.createElement("p",{className:"Header_Name"},t.display_name),t&&t.images?s.a.createElement("img",{className:"Header_Img",src:t.images[0].url||"",alt:"user img"}):s.a.createElement("span",null),s.a.createElement("div",{style:{clear:"both"}}))};a(37);var E=function(e){var t=e.playlist;return s.a.createElement("div",{className:"PlaylistHeader"},s.a.createElement("img",{className:"PlaylistHeader_Image",src:t.images&&t.images[0]?t.images[0].url:"",alt:"playlist img"}),s.a.createElement("div",{className:"PlaylistHeader_Metadata"},s.a.createElement("h3",{className:"PlaylistHeader_Title"},"PLAYLIST"),s.a.createElement("h1",{className:"PlaylistHeader_Name"},t.name||""),s.a.createElement("h5",{className:"PlaylistHeader_TrackCount"},"".concat(t.tracks.total||0," tracks"))))},g=(a(39),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderTracks",value:function(){var e=this.props.items;return e?e.map(function(e){return s.a.createElement("tr",{key:e.track.name},s.a.createElement("td",{className:"Tracklist_Title"},e.track.name),s.a.createElement("td",{className:"Tracklist_Artist_Album"},e.track.artists.map(function(e){return e.name}).join(", ")),s.a.createElement("td",{className:"Tracklist_Artist_Album"},e.track.album.name),s.a.createElement("td",{className:"Tracklist_Popularity"},e.track.popularity))}):null}},{key:"render",value:function(){return s.a.createElement("div",{className:"TrackList"},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"TITLE"),s.a.createElement("th",null,"ARTIST"),s.a.createElement("th",null,"ALBUM"),s.a.createElement("th",null,"POPULARITY")),this.renderTracks())))}}]),t}(n.Component));a(41);var _=function(e){var t=e.playlist;return s.a.createElement("div",{className:"Overview"},s.a.createElement("p",null,"Owner:"," ",t.owner.display_name),s.a.createElement("p",null,t.public?"PUBLIC":"PRIVATE"," | ",t.collaborative?"COLLABORATIVE":"NOT COLLABORATIVE"),s.a.createElement("p",null,t.tracks.total," ","tracks"))},P=a(16),S=a.n(P);a(57);var A=function(e){var t=e.value,a=t||0;(a<0||a>1)&&(a=0);var n={width:"".concat(400,"px")},r={width:"".concat(400*a,"px")};return s.a.createElement("div",{className:"FeatureBar_Outer",style:n},s.a.createElement("div",{className:"FeatureBar_Inner",style:r,"data-tip":t}),s.a.createElement(S.a,{effect:"solid"}))},N=a(17),L=a.n(N),O=(a(61),[{name:"acousticness",description:"A confidence measure from 0.0 to 1.0 of whether the track is acoustic. 1.0 represents high confidence the track is acoustic."},{name:"danceability",description:"Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity. A value of 0.0 is least danceable and 1.0 is most danceable."},{name:"energy",description:"Energy is a measure from 0.0 to 1.0 and represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy."},{name:"instrumentalness",description:"Predicts whether a track contains no vocals. The closer the instrumentalness value is to 1.0, the greater likelihood the track contains no vocal content. Values above 0.5 are intended to represent instrumental tracks."},{name:"liveness",description:"Detects the presence of an audience in the recording. Higher liveness values represent an increased probability that the track was performed live. A value above 0.8 provides strong likelihood that the track is live."},{name:"speechiness",description:"Speechiness detects the presence of spoken words in a track. The more exclusively speech-like the recording (e.g. talk show, audio book, poetry), the closer to 1.0 the attribute value."},{name:"valence",description:"A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry)."}]),C=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getAvg",value:function(e){var t=this.props.trackStats||[],a=t.reduce(function(t,a){return t+Number(a[e])},0)/t.length;return Math.round(100*a)/100}},{key:"renderAverages",value:function(){var e=this;return O.map(function(t){return s.a.createElement("tr",{className:"Stats_TableRow",key:t.name},s.a.createElement("td",{className:"Stats_FeatureName"},s.a.createElement(L.a,{content:t.description,padding:"20px"},t.name)),s.a.createElement("td",null,s.a.createElement(A,{value:e.getAvg(t.name)})),s.a.createElement("td",null,e.getAvg(t.name)))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Stats"},s.a.createElement("h1",{className:"Stats_Averages_Title"},"Averages"),s.a.createElement("table",null,s.a.createElement("tbody",null,this.renderAverages())))}}]),t}(n.Component),j="user-read-private user-read-email playlist-read-private",w=["OVERVIEW","TRACKS","STATS"],I=(a(63),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderTabs",value:function(){var e=this.props,t=e.activeTab,a=e.selectTab;return w.map(function(e){return s.a.createElement("li",{className:t===e?"PlaylistMenu_Active_Tab":"",onClick:function(){return a(e)},key:e},e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"PlaylistMenu"},s.a.createElement("ul",null,this.renderTabs()))}}]),t}(n.Component)),R=(a(65),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={access_token:a.props.cookies.get("access_token")||"",user:{display_name:"",images:[{url:""}]},playlists:[],currentPlaylist:{name:"",tracks:{total:0},images:[{url:""}]},currentPlaylistTracks:[],currentPlaylistTrackStats:[],activeTab:w[0],activePage:"ALL_TRACKS"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.access_token?(this.getPlaylists(),this.getUserProfile()):this.props.history.push("/")}},{key:"componentDidUpdate",value:function(){this.state.access_token||this.props.history.push("/")}},{key:"logout",value:function(){this.props.cookies.remove("access_token"),this.setState({access_token:""})}},{key:"getPlaylists",value:function(){var e=this,t="https://api.spotify.com/v1/me/playlists?&limit=".concat(50);k(t,this.state.access_token,function(t){e.setState({playlists:t.items}),e.setCurrentPlaylist(t.items?t.items[0]:[])})}},{key:"getUserProfile",value:function(){var e=this;k("https://api.spotify.com/v1/me",this.state.access_token,function(t){e.setState({user:t})})}},{key:"setCurrentPlaylist",value:function(e){this.setState({currentPlaylist:e}),this.getTracks(e.id)}},{key:"setActivePage",value:function(e){this.setState({activePage:e})}},{key:"getTracks",value:function(e){if(this.setState({currentPlaylistTracks:[]}),e){var t="https://api.spotify.com/v1/playlists/".concat(e,"/tracks");this.recursivelyGetTracks(t)}}},{key:"recursivelyGetTracks",value:function(e){var t=this;k(e,this.state.access_token,function(e){t.setState({currentPlaylistTracks:t.state.currentPlaylistTracks.concat(e.items)}),e.next?t.recursivelyGetTracks(e.next):t.getTrackStats()})}},{key:"getTrackStats",value:function(){var e=this;this.setState({currentPlaylistTrackStats:[]});for(var t=this.state.currentPlaylistTracks.map(function(e){return e.track.id}),a=0;a<t.length;a+=100){var n=t.slice(a,a+100),s="https://api.spotify.com/v1/audio-features/?ids=".concat(n.toString());k(s,this.state.access_token,function(t){e.setState({currentPlaylistTrackStats:e.state.currentPlaylistTrackStats.concat(t.audio_features)})})}}},{key:"renderActiveTab",value:function(){return"OVERVIEW"===this.state.activeTab?s.a.createElement(_,{playlist:this.state.currentPlaylist}):"TRACKS"===this.state.activeTab?s.a.createElement(g,{items:this.state.currentPlaylistTracks}):"STATS"===this.state.activeTab?s.a.createElement(C,{trackStats:this.state.currentPlaylistTrackStats}):void 0}},{key:"selectTab",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Home"},s.a.createElement(T,{user:this.state.user,logout:this.logout.bind(this)}),s.a.createElement(d,{currentPlaylist:this.state.currentPlaylist,playlists:this.state.playlists,setCurrentPlaylist:this.setCurrentPlaylist.bind(this),setActivePage:this.setActivePage.bind(this),activePage:this.state.activePage}),s.a.createElement("div",{className:"Home_Main_Content"},function(){switch(e.state.activePage){case"PLAYLIST":return e.state.currentPlaylist.name?s.a.createElement("div",null,s.a.createElement(E,{playlist:e.state.currentPlaylist,access_token:e.state.access_token}),s.a.createElement(I,{activeTab:e.state.activeTab,selectTab:e.selectTab.bind(e)}),e.renderActiveTab()):s.a.createElement("p",null);case"ALL_TRACKS":return s.a.createElement(b,{access_token:e.state.access_token});default:return null}}()))}}]),t}(n.Component)),H=Object(y.b)(R),B=a(18),x=a.n(B),G=(a(78),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location,t=x.a.parse(e.hash).access_token||"";t?(this.props.cookies.set("access_token",t),this.props.history.push("/home")):this.props.cookies.get("access_token")&&this.props.history.push("/home")}},{key:"render",value:function(){return s.a.createElement("div",{className:"Landing"},s.a.createElement("h3",{className:"Landing_Title_Spotify"},"Spotify"),s.a.createElement("h1",{className:"Landing_Title_Playlist_Analyzer"},"PLAYLIST ANALYZER"),s.a.createElement("h5",{className:"Landing_Title_Web_App"},"A web app by"," ",s.a.createElement("span",{className:"Landing_Title_Name"},"Jacob Fisher")),s.a.createElement("button",{className:"Landing_Button_Login",onClick:function(){window.location="https://accounts.spotify.com/authorize?response_type=token&client_id=bc800faa1cb3438da94f230ba04a1e1b&scope="+encodeURIComponent(j)+"&redirect_uri="+encodeURIComponent("https://jacobfisher18.github.io/playlist_analyzer/")+"&show_dialog=true"}},"LOGIN"))}}]),t}(n.Component)),K=Object(y.b)(G),U=(a(80),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(y.a,null,s.a.createElement(p.a,{basename:"/playlist_analyzer"},s.a.createElement("div",null,s.a.createElement(h.a,{path:"/",exact:!0,component:K}),s.a.createElement(h.a,{path:"/home",component:H}))))}}]),t}(n.Component));c.a.render(s.a.createElement(U,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.b47feee6.chunk.js.map